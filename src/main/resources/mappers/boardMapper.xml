<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardMapper">

	<!-- NOTICE TABLE SQL 쿼리 -->

	<!-- 페이징 이전 NOTICE BOARD 조회 쿼리 -->
	<!-- <select id="selectAllNoticeBoard"
		resultType="com.todaysTable.vo.NoticeBoardVO">
		SELECT NOTICE_NO, TITLE, CONTENT, PASSWORD, HITS,
		TO_CHAR(REG_DATE,'YYYY-MM-DD')REG_DATE, ADMIN_ID
		FROM NOTICE
		ORDER BY
		NOTICE_NO DESC
	</select> -->

	<!-- 페이징 처리 boardList -->
	<select id="selectBoardListPaging"
		resultType="com.todaysTable.vo.NoticeBoardVO">
		<![CDATA[ 
		SELECT *
		FROM(
			SELECT /*+INDEX_DESC(A PK_NOTICE)*/ ROWNUM AS RNUM, A.*
			FROM(
				SELECT NOTICE_NO, TITLE, CONTENT, PASSWORD, HITS,
						TO_CHAR(REG_DATE,'YYYY-MM-DD')REG_DATE, ADMIN_ID
				FROM NOTICE
			) A
			WHERE ROWNUM <= #{endBoardNum}
		) B
		WHERE B.RNUM >= #{startBoardNum}
		]]>
	</select>

	<!-- 총 게시물 개수 -->
	<select id="totalNoticeList" resultType="Integer">
		SELECT COUNT(*) FROM
		NOTICE
	</select>

	<!-- NOTICE TABLE 게시물 등록 -->
	<insert id="insertNoticeBoard"
		parameterType="com.todaysTable.vo.NoticeBoardVO">
		INSERT INTO NOTICE (NOTICE_NO, TITLE, CONTENT, PASSWORD,
		HITS, REG_DATE, ADMIN_ID)
		VALUES(NOTICE_SEQ.NEXTVAL, #{title},
		#{content}, #{password}, 0, SYSDATE, 'ADMIN')
	</insert>

	<!-- NOTICE TABLE 특정 게시물 조회 -->
	<select id="selectNoticeBoard" parameterType="int"
		resultType="com.todaysTable.vo.NoticeBoardVO">
		SELECT NOTICE_NO, TITLE, CONTENT, PASSWORD, HITS,
		TO_CHAR(REG_DATE,'YYYY-MM-DD')REG_DATE, ADMIN_ID
		FROM NOTICE
		WHERE
		NOTICE_NO = #{notice_no}
	</select>

	<!-- NOTICE TABEL 특정 게시물 수정 -->
	<update id="updateNoticeBoard"
		parameterType="com.todaysTable.vo.NoticeBoardVO">
		UPDATE NOTICE SET TITLE=#{title}, CONTENT=#{content},
		PASSWORD=#{password}, REG_DATE=SYSDATE
		WHERE NOTICE_NO = #{notice_no}
	</update>

	<!-- NOTICE TABEL 특정 게시물 삭제 -->
	<delete id="deleteNoticeBoard" parameterType="int">
		DELETE FROM NOTICE
		WHERE NOTICE_NO = #{notice_no}
	</delete>

	<!-- NOTICE TABEL 조회수 수정 -->
	<update id="updateHits" parameterType="int">
		UPDATE NOTICE SET
		HITS=HITS+1
		WHERE NOTICE_NO = #{notice_no}
	</update>

	<!-- NOTICE TABEL 이미지 등록 -->
	<insert id="insertNoticeImage" parameterType="String">
		INSERT INTO
		NOTICE_IMAGE(IMAGE_NO, NOTICE_NO, IMAGE_PATH)
		VALUES
		(NOTICE_IMAGE_SEQ.NEXTVAL, NOTICE_SEQ.CURRVAL, #{VALUE})
	</insert>

	<!-- NOTICE TABEL 특정 게시물 이미지 조회 -->
	<select id="selectNoticeImage" parameterType="int"
		resultType="com.todaysTable.vo.NoticeBoardImageVO">
		SELECT IMAGE_PATH FROM NOTICE_IMAGE
		WHERE NOTICE_NO =
		#{VALUE}
	</select>

	<!-- RECOM_GOOD_REST TABLE SQL 쿼리 -->





	<!-- QNA TABLE SQL 쿼리 -->


</mapper>